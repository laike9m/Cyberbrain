syntax = "proto2";

// Interface exported by the server.
service Communication {

  // Sync state between client and server.
  rpc SyncState(State) returns (stream State) {}

  // TODO: implement this.
  rpc GetFrameBackTrace(Location) returns (FrameBackTrace) {}
}

message State {
  enum Status {
    CLIENT_READY = 1;
    SERVER_READY = 2;
    EXECUTION_COMPLETE = 3;
    BACKTRACING_COMPLETE = 4;
  }
  optional Status status = 1;

  // Arbitrary optional message.
  optional string message = 2;
}

message Location {
  optional string location = 1;
}

message FrameBackTrace {
  optional string back_trace = 1;
}
